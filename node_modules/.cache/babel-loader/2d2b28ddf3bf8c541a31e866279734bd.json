{"ast":null,"code":"import _regeneratorRuntime from \"/home/usuario/Escritorio/csd-bridge-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/usuario/Escritorio/csd-bridge-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/usuario/Escritorio/csd-bridge-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/usuario/Escritorio/csd-bridge-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/usuario/Escritorio/csd-bridge-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/usuario/Escritorio/csd-bridge-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/usuario/Escritorio/csd-bridge-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/home/usuario/Escritorio/csd-bridge-ui/src/components/RelayEvents.js\";\n\nimport React from 'react';\nimport { inject, observer } from \"mobx-react\";\nimport { EventsListHeader } from './index';\nimport { Event } from './index';\nimport yn from './utils/yn';\nimport { Redirect } from 'react-router';\nvar WAIT_INTERVAL = 700;\nvar ENTER_KEY = 13;\nexport var RelayEvents = (_dec = inject(\"RootStore\"), _dec(_class = observer(_class = (_temp =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(RelayEvents, _React$Component);\n\n  function RelayEvents(props) {\n    var _this;\n\n    _classCallCheck(this, RelayEvents);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RelayEvents).call(this, props));\n\n    _this.onHomeBlockFilter =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(value) {\n        var _this$props$RootStore, alertStore, homeStore, foreignStore;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$props$RootStore = _this.props.RootStore, alertStore = _this$props$RootStore.alertStore, homeStore = _this$props$RootStore.homeStore, foreignStore = _this$props$RootStore.foreignStore;\n                alertStore.setLoading(true);\n\n                if (!(value.substr(0, 2) === \"0x\")) {\n                  _context.next = 9;\n                  break;\n                }\n\n                homeStore.setFilter(true);\n                foreignStore.setFilter(true);\n                _context.next = 7;\n                return homeStore.filterByTxHash(value);\n\n              case 7:\n                _context.next = 20;\n                break;\n\n              case 9:\n                if (!(Number(value) > 0)) {\n                  _context.next = 16;\n                  break;\n                }\n\n                homeStore.setFilter(true);\n                foreignStore.setFilter(true);\n                _context.next = 14;\n                return homeStore.setBlockFilter(value);\n\n              case 14:\n                _context.next = 20;\n                break;\n\n              case 16:\n                foreignStore.setBlockFilter(0);\n                homeStore.setBlockFilter(0);\n                homeStore.setFilter(false);\n                foreignStore.setFilter(false);\n\n              case 20:\n                alertStore.setLoading(false);\n\n              case 21:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.onForeignBlockFilter =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(value) {\n        var _this$props$RootStore2, alertStore, homeStore, foreignStore;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this$props$RootStore2 = _this.props.RootStore, alertStore = _this$props$RootStore2.alertStore, homeStore = _this$props$RootStore2.homeStore, foreignStore = _this$props$RootStore2.foreignStore;\n                alertStore.setLoading(true);\n\n                if (!(value.substr(0, 2) === \"0x\")) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                homeStore.setFilter(true);\n                foreignStore.setFilter(true);\n                _context2.next = 7;\n                return foreignStore.filterByTxHash(value);\n\n              case 7:\n                _context2.next = 20;\n                break;\n\n              case 9:\n                if (!(Number(value) > 0)) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                homeStore.setFilter(true);\n                foreignStore.setFilter(true);\n                _context2.next = 14;\n                return foreignStore.setBlockFilter(value);\n\n              case 14:\n                _context2.next = 20;\n                break;\n\n              case 16:\n                foreignStore.setBlockFilter(0);\n                homeStore.setBlockFilter(0);\n                homeStore.setFilter(false);\n                foreignStore.setFilter(false);\n\n              case 20:\n                alertStore.setLoading(false);\n\n              case 21:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.handleChangeHome =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(e) {\n        var value;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                value = e.target.value;\n                window.clearTimeout(_this.timer);\n                _this.timer = setTimeout(function () {\n                  _this.onHomeBlockFilter(value);\n                }, WAIT_INTERVAL);\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.handleChangeForeign =\n    /*#__PURE__*/\n    function () {\n      var _ref4 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(e) {\n        var value;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                value = e.target.value;\n                window.clearTimeout(_this.timer);\n                _this.timer = setTimeout(function () {\n                  _this.onForeignBlockFilter(value);\n                }, WAIT_INTERVAL);\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function (_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    _this.handleKeyDownHome = function (e) {\n      var value = e.target.value;\n      window.clearTimeout(_this.timer);\n\n      if (e.keyCode === ENTER_KEY && value) {\n        _this.onHomeBlockFilter(value);\n      }\n    };\n\n    _this.handleKeyDownForeign = function (e) {\n      var value = e.target.value;\n      window.clearTimeout(_this.timer);\n\n      if (e.keyCode === ENTER_KEY && value) {\n        _this.onForeignBlockFilter(value);\n      }\n    };\n\n    _this.getHomeEvents = function (homeStore) {\n      return homeStore.events.slice().map(function (_ref5) {\n        var event = _ref5.event,\n            transactionHash = _ref5.transactionHash,\n            blockNumber = _ref5.blockNumber,\n            returnValues = _ref5.returnValues;\n        return {\n          color: _this.colors[event],\n          eventName: event,\n          transactionHash: transactionHash,\n          recipient: returnValues.recipient,\n          value: returnValues.value,\n          blockNumber: blockNumber\n        };\n      });\n    };\n\n    _this.getForeignEvents = function (foreignStore) {\n      return foreignStore.events.slice().map(function (_ref6) {\n        var event = _ref6.event,\n            transactionHash = _ref6.transactionHash,\n            signedTxHash = _ref6.signedTxHash,\n            blockNumber = _ref6.blockNumber,\n            returnValues = _ref6.returnValues;\n        return {\n          color: _this.colors[event],\n          eventName: event,\n          transactionHash: transactionHash,\n          recipient: returnValues.recipient,\n          value: returnValues.value,\n          blockNumber: blockNumber\n        };\n      });\n    };\n\n    _this.onChangeList = function (e) {\n      _this.setState({\n        selectedList: e.target.value\n      });\n    };\n\n    _this.timer = null;\n    _this.colors = {\n      'UserRequestForSignature': 'green',\n      'RelayedMessage': 'green',\n      'UserRequestForAffirmation': 'red',\n      'AffirmationCompleted': 'red',\n      'SignedForUserRequest': 'purple',\n      'SignedForAffirmation': 'purple',\n      'CollectedSignatures': 'blue'\n    };\n    _this.homeValue = '0';\n    _this.foreingValue = '1';\n    _this.state = {\n      selectedList: '0'\n    };\n    return _this;\n  }\n\n  _createClass(RelayEvents, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props$RootStore3 = this.props.RootStore,\n          homeStore = _this$props$RootStore3.homeStore,\n          foreignStore = _this$props$RootStore3.foreignStore,\n          web3Store = _this$props$RootStore3.web3Store;\n      var selectedList = this.state.selectedList;\n      var home = this.getHomeEvents(homeStore, foreignStore);\n      var foreign = this.getForeignEvents(foreignStore, homeStore);\n      var _process$env = process.env,\n          HOME = _process$env.REACT_APP_HOME_WITHOUT_EVENTS,\n          FOREIGN = _process$env.REACT_APP_FOREIGN_WITHOUT_EVENTS;\n      var withoutEvents = web3Store.metamaskNet.id === web3Store.homeNet.id.toString() ? yn(HOME) : yn(FOREIGN);\n      return withoutEvents ? React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        className: \"events-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"events-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(EventsListHeader, {\n        handleChange: selectedList === this.homeValue ? this.handleChangeHome : this.handleChangeForeign,\n        handleKeyDown: selectedList === this.homeValue ? this.handleKeyDownHome : this.handleKeyDownForeign,\n        onChangeList: this.onChangeList,\n        selected: selectedList,\n        homeName: homeStore.networkName,\n        homeValue: this.homeValue,\n        foreignName: foreignStore.networkName,\n        foreignValue: this.foreingValue,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), selectedList === this.homeValue && home.map(function (event) {\n        return React.createElement(Event, Object.assign({\n          txUrl: homeStore.getExplorerTxUrl(event.transactionHash),\n          accountUrl: homeStore.getExplorerAddressUrl(event.recipient),\n          key: event.transactionHash + event.eventName\n        }, event, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }));\n      }), selectedList === this.foreingValue && foreign.map(function (event) {\n        return React.createElement(Event, Object.assign({\n          txUrl: foreignStore.getExplorerTxUrl(event.transactionHash),\n          accountUrl: foreignStore.getExplorerAddressUrl(event.recipient),\n          key: event.transactionHash + event.eventName\n        }, event, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }));\n      })));\n    }\n  }]);\n\n  return RelayEvents;\n}(React.Component), _temp)) || _class) || _class);","map":{"version":3,"sources":["/home/usuario/Escritorio/csd-bridge-ui/src/components/RelayEvents.js"],"names":["React","inject","observer","EventsListHeader","Event","yn","Redirect","WAIT_INTERVAL","ENTER_KEY","RelayEvents","props","onHomeBlockFilter","value","RootStore","alertStore","homeStore","foreignStore","setLoading","substr","setFilter","filterByTxHash","Number","setBlockFilter","onForeignBlockFilter","handleChangeHome","e","target","window","clearTimeout","timer","setTimeout","handleChangeForeign","handleKeyDownHome","keyCode","handleKeyDownForeign","getHomeEvents","events","slice","map","event","transactionHash","blockNumber","returnValues","color","colors","eventName","recipient","getForeignEvents","signedTxHash","onChangeList","setState","selectedList","homeValue","foreingValue","state","web3Store","home","foreign","process","env","HOME","REACT_APP_HOME_WITHOUT_EVENTS","FOREIGN","REACT_APP_FOREIGN_WITHOUT_EVENTS","withoutEvents","metamaskNet","id","homeNet","toString","networkName","getExplorerTxUrl","getExplorerAddressUrl","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { inject, observer } from \"mobx-react\";\nimport { EventsListHeader } from './index'\nimport { Event } from './index'\nimport yn from './utils/yn'\nimport { Redirect } from 'react-router'\n\n\nconst WAIT_INTERVAL = 700;\nconst ENTER_KEY = 13;\n\n@inject(\"RootStore\")\n@observer\nexport class RelayEvents extends React.Component {\n  constructor(props){\n    super(props)\n    this.timer = null;\n    this.colors = {\n      'UserRequestForSignature': 'green',\n      'RelayedMessage': 'green',\n      'UserRequestForAffirmation': 'red',\n      'AffirmationCompleted': 'red',\n      'SignedForUserRequest': 'purple',\n      'SignedForAffirmation': 'purple',\n      'CollectedSignatures': 'blue'\n    }\n    this.homeValue = '0'\n    this.foreingValue = '1'\n    this.state = {\n      selectedList: '0'\n    }\n  }\n\n  onHomeBlockFilter = async (value) => {\n    const { alertStore, homeStore, foreignStore } = this.props.RootStore\n    alertStore.setLoading(true)\n    if(value.substr(0,2) === \"0x\"){\n      homeStore.setFilter(true)\n      foreignStore.setFilter(true)\n      await homeStore.filterByTxHash(value)\n    } else {\n      if(Number(value) > 0){\n        homeStore.setFilter(true)\n        foreignStore.setFilter(true)\n        await homeStore.setBlockFilter(value)\n      } else {\n        foreignStore.setBlockFilter(0)\n        homeStore.setBlockFilter(0)\n        homeStore.setFilter(false)\n        foreignStore.setFilter(false)\n      }\n    }\n    alertStore.setLoading(false)\n  }\n\n  onForeignBlockFilter = async (value) => {\n    const { alertStore, homeStore, foreignStore } = this.props.RootStore\n    alertStore.setLoading(true)\n    if(value.substr(0,2) === \"0x\"){\n      homeStore.setFilter(true)\n      foreignStore.setFilter(true)\n      await foreignStore.filterByTxHash(value)\n    } else {\n      if(Number(value) > 0){\n        homeStore.setFilter(true)\n        foreignStore.setFilter(true)\n        await foreignStore.setBlockFilter(value)\n      } else {\n        foreignStore.setBlockFilter(0)\n        homeStore.setBlockFilter(0)\n        homeStore.setFilter(false)\n        foreignStore.setFilter(false)\n      }\n    }\n    alertStore.setLoading(false)\n  }\n\n  handleChangeHome = async (e) => {\n    const value = e.target.value;\n    window.clearTimeout(this.timer);\n    this.timer = setTimeout(() => {this.onHomeBlockFilter(value)}, WAIT_INTERVAL);\n  }\n\n  handleChangeForeign = async (e) => {\n    const value = e.target.value;\n    window.clearTimeout(this.timer);\n    this.timer = setTimeout(() => {this.onForeignBlockFilter(value)}, WAIT_INTERVAL);\n  }\n\n  handleKeyDownHome = (e) => {\n    const value = e.target.value;\n    window.clearTimeout(this.timer);\n    if (e.keyCode === ENTER_KEY && value) {\n        this.onHomeBlockFilter(value);\n    }\n  }\n\n  handleKeyDownForeign = (e) => {\n    const value = e.target.value;\n    window.clearTimeout(this.timer);\n    if (e.keyCode === ENTER_KEY && value) {\n        this.onForeignBlockFilter(value);\n    }\n  }\n\n  getHomeEvents = (homeStore) => {\n    return homeStore.events.slice().map(({event, transactionHash, blockNumber, returnValues}) =>\n      ({\n        color: this.colors[event],\n        eventName: event,\n        transactionHash,\n        recipient: returnValues.recipient,\n        value: returnValues.value,\n        blockNumber\n      }))\n  }\n\n  getForeignEvents = (foreignStore) => {\n    return foreignStore.events.slice()\n      .map(({ event, transactionHash, signedTxHash, blockNumber, returnValues}) => {\n        return ({\n          color: this.colors[event],\n          eventName: event,\n          transactionHash,\n          recipient: returnValues.recipient,\n          value: returnValues.value,\n          blockNumber\n        })\n      })\n  }\n\n  onChangeList = (e) => {\n    this.setState({selectedList: e.target.value})\n  }\n\n  render(){\n    const { homeStore, foreignStore, web3Store } = this.props.RootStore\n    const { selectedList } = this.state\n    const home = this.getHomeEvents(homeStore, foreignStore)\n    const foreign = this.getForeignEvents(foreignStore, homeStore)\n    const { REACT_APP_HOME_WITHOUT_EVENTS: HOME, REACT_APP_FOREIGN_WITHOUT_EVENTS: FOREIGN } = process.env\n    const withoutEvents = web3Store.metamaskNet.id === web3Store.homeNet.id.toString() ? yn(HOME) : yn(FOREIGN)\n\n    return withoutEvents ? (<Redirect to=\"/\" />) : (\n      <div className=\"events-page\">\n        <div className=\"events-container\">\n          <EventsListHeader\n            handleChange={selectedList === this.homeValue ? this.handleChangeHome : this.handleChangeForeign}\n            handleKeyDown={selectedList === this.homeValue ? this.handleKeyDownHome : this.handleKeyDownForeign}\n            onChangeList={this.onChangeList}\n            selected={selectedList}\n            homeName={homeStore.networkName}\n            homeValue={this.homeValue}\n            foreignName={foreignStore.networkName}\n            foreignValue={this.foreingValue} />\n          {selectedList === this.homeValue\n            && home.map(event =>\n            <Event\n              txUrl={homeStore.getExplorerTxUrl(event.transactionHash)}\n              accountUrl={homeStore.getExplorerAddressUrl(event.recipient)}\n              key={event.transactionHash+event.eventName}\n              {...event} />)}\n          {selectedList === this.foreingValue\n            && foreign.map(event =>\n            <Event\n              txUrl={foreignStore.getExplorerTxUrl(event.transactionHash)}\n              accountUrl={foreignStore.getExplorerAddressUrl(event.recipient)}\n              key={event.transactionHash+event.eventName}\n              {...event} />)}\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}